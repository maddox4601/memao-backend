import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.BVOCwoKb.js";import{A as S}from"./api.Dxbw2WmY.js";const g=new Date,o=n=>`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}`;function I(){const[n,m]=l.useState(""),[y,f]=l.useState([]),[s,h]=l.useState(o(g)),[w,c]=l.useState(!1);l.useEffect(()=>{const t=localStorage.getItem("walletAddress");t?m(t):b()},[]);const b=async()=>{try{if(window.ethereum){const a=(await window.ethereum.request({method:"eth_requestAccounts"}))[0];m(a),localStorage.setItem("walletAddress",a)}else alert("Please install MetaMask wallet")}catch(t){console.error("Failed to get wallet address:",t)}};l.useEffect(()=>{n&&(c(!0),fetch(S.CHECKIN_MONTHLY(n,s)).then(t=>t.json()).then(t=>{f(t.dates||[]),c(!1)}).catch(()=>c(!1)))},[n,s]);const p=()=>{const[t,a]=s.split("-").map(Number),d=new Date(t,a-2,1);h(o(d))},v=()=>{const[t,a]=s.split("-").map(Number),d=new Date(t,a,1);h(o(d))},j=()=>{const[t,a]=s.split("-").map(Number),d=new Date(t,a-1,1).getDay(),N=new Date(t,a,0).getDate(),i=[];for(let r=0;r<d;r++)i.push(e.jsx("div",{className:"w-10 h-10 opacity-0","aria-hidden":"true"},`empty-${r}`));for(let r=1;r<=N;r++){const u=`${s}-${r.toString().padStart(2,"0")}`,k=u===o(g)+`-${g.getDate().toString().padStart(2,"0")}`,x=y.includes(u);i.push(e.jsxs("div",{className:`
            relative w-10 h-10 flex items-center justify-center rounded-lg cursor-pointer 
            transition-all duration-200 ease-in-out
            ${x?"bg-gradient-to-br from-emerald-400 to-teal-500 text-white shadow-md":"bg-gray-50 dark:bg-gray-800 text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}
            ${k?"ring-1 ring-blue-400 dark:ring-blue-500":""}
          `,children:[r,x&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 bg-amber-400 rounded-full border border-white dark:border-gray-900"})]},r))}return e.jsx("div",{className:"grid grid-cols-7 gap-2 mt-4",children:i})};return e.jsxs("div",{className:"max-w-2xl w-full mx-auto p-6 bg-white dark:bg-gray-900 rounded-2xl shadow-md dark:shadow-gray-800/30 mb-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:p,className:`px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-lg 
          hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-150 flex items-center text-sm`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Previous"]}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long"})}),e.jsxs("button",{onClick:v,className:`px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-lg 
          hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-150 flex items-center text-sm`,children:["Next",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2 text-center font-medium text-gray-500 dark:text-gray-400 mb-3 text-xs",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(t=>e.jsx("div",{children:t},t))}),w?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-emerald-500"})}):e.jsx(j,{}),e.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-4 text-xs text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-2.5 h-2.5 bg-emerald-400 rounded-full mr-1.5"}),"Checked In"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-2.5 h-2.5 bg-amber-400 rounded-full mr-1.5"}),"Today's Check-In"]})]})]})}export{I as default};
