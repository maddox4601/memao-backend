import{j as s}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.BVOCwoKb.js";import{A as f}from"./api.Dxbw2WmY.js";function N(){const[e,t]=r.useState(""),[a,o]=r.useState(!1),[l,n]=r.useState(""),[i,d]=r.useState(!1),c=604800;r.useEffect((()=>{const e=()=>{t(`Event Countdown: ${function(e){const t=Math.floor(e/86400),a=Math.floor(e%86400/3600),s=Math.floor(e%3600/60),r=e%60;return`${t} Day ${String(a).padStart(2,"0")}:${String(s).padStart(2,"0")}:${String(r).padStart(2,"0")}`}(function(){const e=Math.floor(Date.now()/1e3);return c-e%c}())}`)};e();const a=setInterval(e,1e3);return()=>clearInterval(a)}),[]),r.useEffect((()=>(window.ethereum&&window.ethereum.on("accountsChanged",m),()=>{window.ethereum&&window.ethereum.removeListener("accountsChanged",m)})),[]);const m=e=>{if(e.length>0){const t=e[0];n(t),localStorage.setItem("walletAddress",t),o(!0),u(t)}else n(""),o(!1),d(!1),localStorage.removeItem("walletAddress")},u=async e=>{try{const t=await fetch(`${f.AIRDROP_STATUS}?address=${e}`);if(t.ok){const a=await t.json();a.success&&a.data&&(d(a.data.is_distributed),localStorage.setItem(`${e}_hasClaimed`,a.data.is_distributed?"true":"false"))}}catch(e){console.warn("Failed to check claim status",e)}};return r.useEffect((()=>{const e=localStorage.getItem("walletAddress");e&&(n(e),o(!0),u(e))}),[]),s.jsxs("section",{className:"py-20 bg-white dark:bg-gray-900 text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"MEMAO Airdrop"}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-10",children:"Connect your wallet and claim free $MEMAO for early community contributors."}),s.jsx("img",{src:"/src/assets/images/memao-airdrop.webp",alt:"MEMAO Airdrop",className:"mx-auto rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 max-w-full mb-10",width:"800",height:"480",loading:"lazy"}),s.jsx("p",{className:"text-xl font-semibold text-red-600 mb-6",children:e}),s.jsx("button",{disabled:i,onClick:i?null:l?async()=>{if(l)try{const e=await fetch(f.COLLECT_ADDRESS,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:l})}),t=await e.json();e.ok&&t.success?(d(!0),localStorage.setItem(`${l}_hasClaimed`,"true"),alert("Claim successful! Rewards will be distributed after the event ends.")):("This address has already participated in the airdrop"===t.message&&(d(!0),localStorage.setItem(`${l}_hasClaimed`,"true")),alert(t.message||"Claim failed"))}catch(e){console.error("Claim failed:",e),alert("Claim failed, please try again later.")}else alert("Please connect your wallet first!")}:async()=>{if(window.ethereum)try{const e=(await window.ethereum.request({method:"eth_requestAccounts"}))[0];localStorage.setItem("walletAddress",e),n(e),o(!0),u(e)}catch(e){console.error("Wallet connection failed:",e),alert("Failed to connect wallet!")}else alert("MetaMask is not installed. Please install it first!")},className:(i?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700")+" text-white font-semibold py-3 px-6 rounded-xl transition text-lg",children:i?"Airdrop Joined":l?"Join Airdrop":"Connect Wallet"}),l&&s.jsxs("p",{className:"mt-4 text-gray-600 dark:text-gray-400 text-sm",children:["Wallet Address: ",l]})]})}export{N as default};